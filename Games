local ReplicatedStorage = game:GetService('ReplicatedStorage')
local Players = game:GetService('Players')

local SupportedGames = {
    [1008451066] = {
        Name = 'Da Hood',
        Updater = 'UpdateMousePosI2',
        HoodGame = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainEvent')
            end
        }
    },

    [9464989490] = {
        Name = 'Model Hood',
        Updater = 'DEAHOODMOUSEPOSx3^3',
        HoodGame = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                local MainRemotes = ReplicatedStorage:FindFirstChild('MainRemotes')
                return MainRemotes and MainRemotes:FindFirstChild('MainRemoteEvent')
            end
        }
    },

    [9605005871] = {
        Name = 'Dee Hood',
        Updater = '',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainEvent')
            end
        }
    },

    [9628959320] = {
        Name = 'Zee Hood',
        Updater = 'ZEEHOODMOUSEPOSx3^3',
        HoodGame = false,
        UseZeeHoodEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainRemotes') and ReplicatedStorage.MainRemotes:FindFirstChild('MainRemoteEvent')
            end
        }
    },

    [9506144636] = {
        Name = 'Der Hood',
        Updater = 'D3RHooDMSOUEPoS233^+',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                local MainRemotes = ReplicatedStorage:FindFirstChild('MainRemotes')
                return MainRemotes and MainRemotes:FindFirstChild('MainRemoteEvent')
            end
        }
    },

    [9568415059] = {
        Name = 'Das Hood',
        Updater = nil,
        HoodGame = false,
        UseDasHoodEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainEvent')
            end
        }
    },

    [3634139746] = {
        Name = 'Hood Customs',
        Updater = nil,
        HoodGame = false,
        UseHoodCustomsEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainEvent')
            end
        }
    },

    [1958807588] = {
        Name = 'Hood Modded',
        Updater = nil,
        HoodGame = false,
        UsePacketsEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return nil
            end
        }
    },

    [9472305540] = {
        Name = 'Boom Hood',
        Updater = nil,
        HoodGame = false,
        UseBoomHoodEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MainEvent')
            end
        }
    },

    [9260303791] = {
        Name = 'Da Downhill',
        Updater = 'MOUSE',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MAINEVENT')
            end
        }
    },

    [9267192939] = {
        Name = 'Da Uphill',
        Updater = 'MOUSE',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MAINEVENT')
            end
        }
    },

    [9629772507] = {
        Name = 'Da Strike',
        Updater = 'MOUSE',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MAINEVENT')
            end
        }
    },

    [9297615898] = {
        Name = 'Hood Bank',
        Updater = 'MOUSE',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MAINEVENT')
            end
        }
    },

    [9072783825] = {
        Name = 'Da Bot Aim Trainer',
        Updater = 'MOUSE',
        HoodGame = false,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                if Player and Player.Character then
                    return Player.Character:FindFirstChild('GRABBING_CONSTRAINT') ~= nil
                end
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('MAINEVENT')
            end
        }
    },

    [7406797672] = {
        Name = 'Da Track',
        Updater = nil,
        HoodGame = false,
        UseMousePosAttribute = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('BodyEffects') then
                    local KO = Player.Character.BodyEffects:FindFirstChild('K.O')
                    return KO and KO.Value or false
                end
                return false
            end,
            GrabbedFunction = function(Player)
                return false
            end,
            RemotePath = function()
                return nil
            end
        }
    },

    [8020981242] = {
        Name = 'Dan FFA',
        Updater = nil,
        HoodGame = false,
        UseDanFFAEmulation = true,
        Functions = {
            KnockedFunction = function(Player)
                if Player and Player.Character and Player.Character:FindFirstChild('State') then
                    local State = Player.Character.State
                    local KO = State:FindFirstChild('KO') or State:FindFirstChild('K.O')
                    if KO then return KO.Value end
                end
                return false
            end,
            GrabbedFunction = function(Player)
                return false
            end,
            RemotePath = function()
                return ReplicatedStorage:FindFirstChild('Remote')
            end
        }
    },
}

local function GetCurrentGame()
    return SupportedGames[game.GameId]
end

-- support check
local function IsGameSupported()
    return SupportedGames[game.GameId] ~= nil
end

-- get all supported
local function GetSupportedGameIds()
    local ids = {}
    for id, _ in pairs(SupportedGames) do
        table.insert(ids, id)
    end
    return ids
end

local function GetGameByName(name)
    for id, gameData in pairs(SupportedGames) do
        if gameData.Name == name then
            return id, gameData
        end
    end
    return nil, nil
end

-- dee hood
local function ResolveDeeHoodUpdater(gameData)
    if gameData and gameData.Name == 'Dee Hood' then
        for _, Player in pairs(Players:GetPlayers()) do
            if Player.Backpack:GetAttribute('MUV') then
                gameData.Updater = Player.Backpack:GetAttribute('MUV')
                return gameData.Updater
            end
        end
    end
    return gameData and gameData.Updater
end

--[[
    UseZeeHoodEmulation     - zee's custom emulation
    UseDasHoodEmulation     - das hood's entirely new emulation metod ( no one has done it the way i do lmfao)
    UsePacketsEmulation     - hood moddeds packet based sys
    UseBoomHoodEmulation    - boom hood emulation
    UseDanFFAEmulation      - Dan ffa fully custom emulation
    UseMousePosAttribute    - just updating mouse pos attribute on tool activation
    
]]

return {
    Games = SupportedGames,
    GetCurrentGame = GetCurrentGame,
    IsGameSupported = IsGameSupported,
    GetSupportedGameIds = GetSupportedGameIds,
    GetGameByName = GetGameByName,
    ResolveDeeHoodUpdater = ResolveDeeHoodUpdater,
}
